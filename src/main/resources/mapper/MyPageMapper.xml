<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.mapper.MyPageMapper">
	<select id="findList_title" parameterType="int"
		resultType="String">
		select list_title from list_board where list_no=#{list_no}
	</select>
	<update id="updateUserInfo"
		parameterType="com.bitcamp.DTO.member.MemberDTO">
		update member set
		user_name=#{user_name},
		user_nick=#{user_nick},
		user_email=#{user_email},
		user_address=#{user_address},
		user_call=#{user_call} where
		member_no=#{member_no}
	</update>
	<update id="updateUserPassword"
		parameterType="java.util.HashMap">
		update member set
		user_password=#{newPwd}
		where
		member_no=#{member_no}
	</update>
	<insert id="insertCQA" parameterType="java.util.HashMap">
		insert into
		customer_qa_board(question_no, member_no, question_title,
		question_content, question_date, answer_status,
		question_delete_status, question_type)
		values(customer_qa_board_seq.nextval, #{member_no}, #{question_title},
		#{question_content}, sysdate, '답변대기', 1, #{question_type})
	</insert>
	<update id="withdraw" parameterType="String">
		update member set
		user_status=0 where user_id=#{user_id}
	</update>
	<select id="buyList" parameterType="int"
		resultType="com.bitcamp.DTO.order.OrderDTO">
		select * from
		order_board where member_no=#{member_no} order
		by order_date desc
	</select>
	<select id="buyListOption" parameterType="int"
		resultType="java.util.HashMap">
		select order_add_option, order_amount, ordermade_no from
		order_board where
		order_no=#{order_no}
	</select>
	<select id="buyListOption_name" parameterType="int"
		resultType="String">
		select option_name from list_option_board where
		option_no=#{option_no}
	</select>
	<select id="cQAList" parameterType="int"
		resultType="com.bitcamp.DTO.customerqaboard.CustomerQABoardDTO">
		select * from customer_qa_board where
		member_no=#{member_no}
	</select>
	<select id="buyerPQList" parameterType="int"
		resultType="com.bitcamp.DTO.productdetail.QABoardDTO">
		select * from qa_board where member_no=#{member_no}
	</select>

	<select id="buyerReviewList" parameterType="int"
		resultType="com.bitcamp.DTO.productdetail.BuyReviewDTO">
		select * from order_board ob inner join buy_review br on
		ob.order_no=br.order_no where member_no=#{member_no}
	</select>
	<select id="sellList" parameterType="String"
		resultType="com.bitcamp.DTO.order.OrderDTO">
		select * from order_board ob inner join list_board lb on
		ob.list_no=lb.list_no where list_artist=#{user_id}
	</select>
	<select id="sellerPQAList" parameterType="String"
		resultType="com.bitcamp.DTO.productdetail.QABoardDTO">
		select * from qa_board qb inner join list_board lb on
		qb.list_no=lb.list_no where list_artist=#{user_id}
	</select>
	<select id="sellerReviewList" parameterType="String"
		resultType="com.bitcamp.DTO.productdetail.BuyReviewDTO">
		select * from list_board lb inner join order_board ob on
		lb.list_no=ob.list no inner join buy_review br on
		ob.order_no=br.order_no where list_artist=#{user_id}
	</select>
</mapper>